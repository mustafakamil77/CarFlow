project tree
----------------------------------------------------------
â”œâ”€â”€ accounts
â”‚Â Â  â”œâ”€â”€ admin.py
â”‚Â Â  â”œâ”€â”€ apps.py
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ migrations
â”‚Â Â  â”‚Â Â  â””â”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ models.py
â”‚Â Â  â”œâ”€â”€ tests.py
â”‚Â Â  â””â”€â”€ views.py
â”œâ”€â”€ fleet
â”‚Â Â  â”œâ”€â”€ admin.py
â”‚Â Â  â”œâ”€â”€ apps.py
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ migrations
â”‚Â Â  â”‚Â Â  â””â”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ models.py
â”‚Â Â  â”œâ”€â”€ tests.py
â”‚Â Â  â””â”€â”€ views.py
â”œâ”€â”€ fuel
â”‚Â Â  â”œâ”€â”€ admin.py
â”‚Â Â  â”œâ”€â”€ apps.py
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ migrations
â”‚Â Â  â”‚Â Â  â””â”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ models.py
â”‚Â Â  â”œâ”€â”€ tests.py
â”‚Â Â  â””â”€â”€ views.py
â”œâ”€â”€ maintenance
â”‚Â Â  â”œâ”€â”€ admin.py
â”‚Â Â  â”œâ”€â”€ apps.py
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ migrations
â”‚Â Â  â”‚Â Â  â””â”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ models.py
â”‚Â Â  â”œâ”€â”€ tests.py
â”‚Â Â  â””â”€â”€ views.py
â”œâ”€â”€ manage.py
â”œâ”€â”€ project
â”‚Â Â  â”œâ”€â”€ asgi.py
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ __pycache__
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.cpython-310.pyc
â”‚Â Â  â”‚Â Â  â””â”€â”€ settings.cpython-310.pyc
â”‚Â Â  â”œâ”€â”€ settings.py
â”‚Â Â  â”œâ”€â”€ urls.py
â”‚Â Â  â””â”€â”€ wsgi.py
â”œâ”€â”€ projectTree.txt
â””â”€â”€ reports
    â”œâ”€â”€ admin.py
    â”œâ”€â”€ apps.py
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ migrations
    â”‚Â Â  â””â”€â”€ __init__.py
    â”œâ”€â”€ models.py
    â”œâ”€â”€ tests.py
    â””â”€â”€ views.py

12 directories, 44 files




--------------------------------------------------------------------

**ROLE:**
You are a senior Django full-stack engineer and software architect. Build a production-ready fleet management web application based on the following detailed requirements.

---

# ğŸ“Œ Project Overview

Develop a **Fleet Management Web System** focused on vehicle maintenance tracking and periodic condition logging.

### ğŸ§± Tech Stack

* Backend: Django (latest stable)
* Database: SQLite (development friendly)
* Frontend: Tailwind CSS + Vanilla JavaScript
* Maps: OpenStreetMap (Leaflet.js recommended)
* Python version: 3.11+
* Follow clean architecture and best practices.

---

# ğŸš— Core Functional Requirements

## 1ï¸âƒ£ Vehicle Management

Implement full CRUD for vehicles.

### Fields

* plate_number
* brand
* model
* year
* current_latitude
* current_longitude
* notes (optional)
* created_at

### Features

* List view with search and filters
* Detail page per vehicle
* Interactive map showing vehicle location using OpenStreetMap
* Ability to update vehicle coordinates

---

## 2ï¸âƒ£ Vehicle Periodic Condition (Photographic Inspection)

Allow users to log vehicle condition snapshots.

### CarCondition

* car (FK)
* date
* mileage
* notes
* is_post_maintenance (boolean)
* created_by

### CarImage

* condition (FK)
* image
* angle (choices: front, rear, left, right, interior, other)

### Required Features

* Upload multiple images per condition
* Timeline view per vehicle
* Condition detail page with gallery
* Image preview before upload
* Automatic image cleanup on delete

---

## 3ï¸âƒ£ Maintenance Requests

### MaintenanceRequest Fields

* car (FK)
* requested_by (User FK)
* description
* priority (low, medium, high, critical)
* status (open, in_progress, completed)
* created_at
* resolved_at
* images (optional)

### Required Workflow

When a maintenance request is created:

âœ… Save request
âœ… Send email notification to maintenance department
âœ… Include:

* request details
* vehicle info
* direct link to request page

### Additional Rules

* Status tracking workflow
* When marked **completed**:

  * allow creating a new CarCondition marked as post-maintenance

---

## 4ï¸âƒ£ Fuel Consumption Upload via Excel

Allow uploading Excel file containing fuel logs.

### Expected Columns

* plate_number
* date
* mileage
* liters
* cost

### Requirements

* Validate column names
* Validate data types
* Skip invalid rows with logging
* Bulk insert optimized
* Show upload summary:

  * total rows
  * success
  * failed

Use **pandas or openpyxl**.

---

# ğŸ” Roles & Permissions

Implement role-based access:

* Fleet Manager
* Maintenance Technician
* Driver

### Suggested Permissions

Fleet Manager:

* full access

Technician:

* view vehicles
* manage maintenance

Driver:

* view assigned vehicles
* create condition reports

Use Django Groups and Permissions.

---

# ğŸ“Š Reports & Analytics

Implement dashboard with charts:

* Fuel consumption per vehicle
* Maintenance frequency
* Monthly fuel cost

Use Chart.js.

---

# ğŸ”” Smart Notifications

Implement automated alerts:

* upcoming maintenance based on mileage threshold
* overdue maintenance

Use periodic task system (Celery or Django Q preferred, fallback to cron).

---

# ğŸ“„ PDF Export

Provide PDF export for:

* vehicle condition report
* maintenance history

Use reportlab or WeasyPrint.

---

# ğŸ¨ Frontend & UX Requirements

Use Tailwind CSS with:

* responsive design
* clean modern UI
* dashboard layout
* modals
* dropdowns
* dynamic tables
* loading states
* toast notifications

Prefer **django-tailwind build workflow**, not only CDN.

---

# ğŸ—ºï¸ Map Integration

Use Leaflet.js with OpenStreetMap to:

* show vehicle markers
* popup with vehicle info
* support multiple vehicles on map
* auto-fit bounds

---

# âš™ï¸ Technical Best Practices

## Django Structure

Create modular apps:

* accounts
* fleet
* maintenance
* fuel
* reports

Follow:

* class-based views
* service layer when appropriate
* clean models
* reusable templates

---

## Media & Static Handling

* configure MEDIA_ROOT
* use django-cleanup
* use Whitenoise for static files
* proper file naming for uploads

---

## Email

Configure SMTP-ready email backend.

Use:

* django-templated-email
* async sending via Celery/Django Q

---

## Optional (Future Ready)

Prepare project to optionally support:

* Django REST Framework API
* PostgreSQL migration
* Docker deployment

---

# ğŸš€ Development Priority Order

Implement in this exact order:

1. Vehicle management + map
2. Vehicle condition with images
3. Maintenance requests + email
4. Fuel Excel upload
5. Roles & permissions
6. Dashboard & reports
7. Notifications
8. PDF export

---

# ğŸ“¦ Expected Output from TRAE AI

Generate:

âœ… complete Django project
âœ… models
âœ… migrations
âœ… admin configuration
âœ… forms
âœ… views
âœ… URLs
âœ… Tailwind setup
âœ… basic templates
âœ… sample dashboard
âœ… requirements.txt
âœ… README with run instructions

Code must be clean, production-ready, and well-commented.

---
